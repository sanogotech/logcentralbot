<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <title>Centralisateur de Logs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body class="bg-light text-dark">

    <div class="container py-4">
        <h1 class="mb-4 text-primary text-center">üìä Centralisateur de Logs</h1>

        <!-- Zone de Filtres -->
        <form method="get" class="row g-3 align-items-end mb-4">
            <div class="col-md-4">
                <label for="tag" class="form-label">Filtrer par Tag</label>
                <input type="text" id="tag" name="tag" class="form-control" placeholder="ex: auth, api, db" value="{{ tag_filter or '' }}" />
            </div>
            <div class="col-md-4">
                <label for="level" class="form-label">Niveau</label>
                <select name="level" id="level" class="form-select">
                    <option value="">Tous les niveaux</option>
                    <option value="INFO" {% if level_filter == 'INFO' %}selected{% endif %}>INFO</option>
                    <option value="WARNING" {% if level_filter == 'WARNING' %}selected{% endif %}>WARNING</option>
                    <option value="ERROR" {% if level_filter == 'ERROR' %}selected{% endif %}>ERROR</option>
                </select>
            </div>
            <div class="col-md-4">
                <button class="btn btn-primary w-100" type="submit">üîç Appliquer les Filtres</button>
            </div>
        </form>

        <!-- R√©sum√© des Filtres -->
        <div class="alert alert-info">
            <strong>Filtres actifs :</strong>
            Tag = <span class="badge bg-secondary">{{ tag_filter or 'Tous' }}</span>,
            Niveau = <span class="badge bg-secondary">{{ level_filter or 'Tous' }}</span>,
            R√©sultats : <span class="badge bg-dark">{{ logs|length }}</span>
        </div>

        <!-- Tableau de Logs -->
        <div class="table-responsive">
            <table class="table table-hover table-striped table-bordered align-middle">
                <thead class="table-dark">
                    <tr>
                        <th scope="col">üè∑Ô∏è Tag</th>
                        <th scope="col">üïí Date/Heure</th>
                        <th scope="col">‚ö†Ô∏è Niveau</th>
                        <th scope="col">üìù Message</th>
                    </tr>
                </thead>
                <tbody>
                    {% for log in logs %}
                    <tr>
                        <td>{{ log.tag }}</td>
                        <td>{{ log.timestamp }}</td>
                        <td>
                            <span class="badge {% if log.level == 'ERROR' %}bg-danger{% elif log.level == 'WARNING' %}bg-warning text-dark{% else %}bg-info text-dark{% endif %}">
                                {{ log.level }}
                            </span>
                        </td>
                        <td>{{ log.message }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" class="text-center text-muted">Aucun log ne correspond √† vos crit√®res.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Aide -->
        <div class="alert alert-secondary mt-4">
            <h5>‚ÑπÔ∏è Astuces :</h5>
            <ul>
                <li>Utilisez des mots-cl√©s dans le champ <strong>Tag</strong> pour cibler une source sp√©cifique.</li>
                <li>Combinez le filtre <strong>Niveau</strong> pour n'afficher que les erreurs critiques.</li>
                <li>Les couleurs indiquent visuellement le niveau de gravit√© : <span class="badge bg-info text-dark">INFO</span>, <span class="badge bg-warning text-dark">WARNING</span>, <span class="badge bg-danger">ERROR</span>.</li>
            </ul>
        </div>

        <footer class="text-center text-muted mt-5 small">
            Centralisateur de Logs - Flask App &copy; 2025
        </footer>
    </div>

</body>
</html>
